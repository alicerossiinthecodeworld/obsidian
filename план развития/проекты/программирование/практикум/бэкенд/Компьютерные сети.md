
#сети

В вашей квартире наверняка есть роутер. Он выполняет две функции:

- создаёт маленькую локальную сеть у вас дома;
- обеспечивает связь с провайдером интернета.

**Публичные («белые») IP-адреса** предназначены для адресации в глобальной сети, они уникальны.

При подключении к интернету роутер получает публичный IP-адрес от провайдера. Он уникален и не может совпадать с публичным IP-адресом другого устройства — как не может быть двух домов с абсолютно одинаковыми адресами (вы тоже подумали про фильм «Ирония судьбы, или С лёгким паром»?). Ведь иначе не понять, куда отправлять данные.

**Приватные («серые») IP-адреса** уникальны только в пределах локальной сети, например в пределах вашей квартиры. Телефон и компьютер, подключённые к одному роутеру, не могут иметь одинаковые IP-адреса. Но устройства, которые подключены к другому роутеру (допустим, вашего соседа), могут быть с такими же IP-адресами, как и у вас.

## Где взять IP-адрес? DHCP-службы

При подключении к сети каждое устройство получает IP-адрес. За процедуру выдачи IP-адреса отвечает служба DHCP (Dynamic Host Configuration Protocol — «протокол динамической настройки узла»).

В домашней сети эта служба запущена на роутере. Если к вам в гости зайдёт знакомый и подключится к сети Wi-Fi, DHCP выдаст его устройству приватный IP-адрес.

## Поиск адреса по имени. DNS

Для доступа на сайты мы не вводим IP-адреса в браузер: как их вообще можно запомнить? Чтобы сделать адреса сетевых серверов более удобными, придумали систему доменных имён — буквенных адресов, которыми мы и пользуемся. Мы пишем имя сайта — и специальная система DNS преобразует его в IP-адрес, понятный компьютерным системам.

## Маршрут построен

Если бы ваш компьютер и сервер напрямую соединялись проводом, можно было бы отправлять данные прямо по нему. Но интернет — сложная сеть, где невозможно соединить каждый компьютер с каждым сервером. Данные приходится передавать через множество узлов и каждый раз определять, какому именно узлу их отправить. Чтобы доставить данные, IP-адреса недостаточно — нужно определить маршрут.

Определить, через какие узлы прошёл запрос, можно с помощью терминала. Откройте его и введите команду:
```
# Mac OS и Linux
traceroute yandex.ru 
```

![[Pasted image 20240426011610.png]]
## Протокол передачи данных TCP

Для передачи данных в сети чаще всего используется протокол TCP (Transmission Control Protocol — «протокол управления передачей»).

Протокол TCP устанавливает связь с сервером по процедуре трёхэтапного согласования ("three way handshake"):

- клиент посылает на сервер специальный запрос на синхронизацию;
- сервер получает запрос и отвечает;
- клиент посылает еще один сигнал, чтобы подтвердить, что получил ответ сервера.

Связь считается установленной, если все три этапа прошли успешно. Если возникает ошибка, всё начинается заново.

##   
Протокол передачи данных UDP

В отличие от TCP, протокол передачи данных на основе UDP реализует необходимый минимум для передачи данных по сети.

Для передачи в UDP не требуется предварительно устанавливать соединение между отправителем и получателем, а сама информация передаётся без проверки готовности принимающей стороны. Передаваемые пакеты данных в UDP не нумеруются, поэтому порядок их обработки не гарантируется и возможна ситуация, когда сначала будет обработан пакет, который был отправлен позже.

| TCP                                                                             | UDP                                                                       |
| ------------------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| Гарантирует доставку данных                                                     | Гарантирует только отправку данных                                        |
| Не очень быстрый                                                                | Быстрый                                                                   |
| Данные упорядочиваются сервером                                                 | Данные могут упорядочиваться на уровне приложения                         |
| Требует установки соединения перед отправкой                                    | Установка соединения не нужна                                             |
| Используется в мессенджерах, банковских приложениях и протоколах HTTP, FTP, SSH | Используется в видео, стриминге, онлайн-играх и протоколах DNS, DHCP, NTP |

## TCP/IP модель
модель передачи данных через интернет — TCP/IP модель. Она включает в себя 4 уровня:

![image](https://pictures.s3.yandex.net/resources/Untitled_14_1659090058.png)Каждый уровень — это набор протоколов. Разберём их все:

- **Канальный.** Этот уровень ближе всего к железу. Он определяет, как разделить данные на пакеты и закодировать для передачи по сети. Помогает упаковать информацию так, чтобы промежуточные узлы понимали, куда её следует отправить, а принимающая сторона смогла правильно её интерпретировать. Протоколы этого уровня: WLAN (для подключения по Wi-Fi) и Ethernet (по проводу).
- **Сетевой.** Данные закодированы, теперь необходимо выстроить логистику передачи пакетов, логику самой сети. Она строится на протоколе IP (Internet Protocol)_._ Этот протокол определяет, каким образом компьютеры объединяются в сеть и как осуществляется маршрутизация пакетов в сети. IP-адрес — часть протокола IP.
- **Транспортный.** Когда сеть готова, в ней можно обмениваться информацией. Для этого и нужен транспортный протокол. Он отвечает на вопрос: «Как передавать сообщения?» и включает в себя протоколы TCP (надёжно, но неторопливо) и UDP (быстро, но с возможными потерями).
- **Прикладной.** Это уровень, с которым взаимодействует пользователь. Он включает в себя протоколы HTTP, FTP и SSH.