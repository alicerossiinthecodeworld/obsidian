#бд #базаданных #документныебд

Вместо таблиц в этих БД используют коллекции — нежёсткие структуры данных, которые состоят из документов, или записей. Разберём на примере — добавим функциональность интернет-магазину: если пользователь совершил покупку на сумму большую чем 10 000 рублей, ему дают скидку на следующий товар.
В случае с реляционным подходом мы бы написали код так, что при оформлении заказа к базе отправлялся бы запрос: «Проверь, есть ли в таблице „Заказы“ вот такой идентификатор пользователя». Исходя из этого высчитывалась бы скидка.

В нереляционной БД другой подход. При заказе достаточно давать пользователю параметр, который бы говорил, что заказ уже сделан. Тогда не нужно проводить дополнительный поиск по базе заказов:

{
    "id": "1234252",
    "name": "Внук Виталия Сергеевича",
    "madeOrder": true
},
{
    "id": "1208772",
    "name": "Стас Басов",
} 

Это и есть документ, который хранит пользователей. Мы не привязаны к жёсткой структуре: у одного пользователя есть свойство `"madeOrder"`, а у другого — нет.


### Недостатки документных БД

У документных БД есть минусы. К примеру, необходимо дублировать одни и те же данные. Если пользователь изменит имя, придётся обновлять его и в документах с заказами. Кроме этого, в документных БД нет транзакций, хотя есть исключения из правил. Например, в [[монго]] они есть.